<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <title>Trung thu vui v·∫ª nh√©</title>
    
    <!-- Meta tags cho SEO v√† chia s·∫ª m·∫°ng x√£ h·ªôi -->
    <meta name="description" content="B·∫°n th·∫≠t may m·∫Øn khi nh·∫≠n ƒë∆∞·ª£c m√≥n qu√† n√†y. Ch√∫c b·∫°n v√† gia ƒë√¨nh lu√¥n lu√¥n h·∫°nh ph√∫c üåï‚ú®">
    <meta name="keywords" content="trung thu, l·ªùi ch√∫c, m∆∞a ch·ªØ 3D, t√¨nh y√™u, h·∫°nh ph√∫c, trƒÉng r·∫±m, messenger, facebook">
    <meta name="author" content="Trung Thu">
    
    <!-- Open Graph Meta Tags cho Facebook & Messenger -->
    <meta property="og:title" content="üåï Trung thu vui v·∫ª nh√©">
    <meta property="og:description" content="B·∫°n th·∫≠t may m·∫Øn khi nh·∫≠n ƒë∆∞·ª£c m√≥n qu√† n√†y. Ch√∫c b·∫°n v√† gia ƒë√¨nh lu√¥n lu√¥n h·∫°nh ph√∫c üåï‚ú®">
    <meta property="og:image" content="https://trung-thu-two.vercel.app/image/og-image.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Trung thu vui v·∫ª nh√© - L·ªùi ch√∫c h·∫°nh ph√∫c v·ªõi m·∫∑t trƒÉng v√† th·ªè">
    <meta property="og:url" content="">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Trung Thu 3D">
    <meta property="og:locale" content="vi_VN">
    
    <!-- Facebook App ID cho Messenger (n·∫øu c√≥) -->
    <meta property="fb:app_id" content="">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="üåï Trung thu vui v·∫ª nh√©">
    <meta name="twitter:description" content="B·∫°n th·∫≠t may m·∫Øn khi nh·∫≠n ƒë∆∞·ª£c m√≥n qu√† n√†y. Ch√∫c b·∫°n v√† gia ƒë√¨nh lu√¥n lu√¥n h·∫°nh ph√∫c üåï‚ú®">
    <meta name="twitter:image" content="https://trung-thu-two.vercel.app/image/og-image.png">
    <meta name="twitter:image:alt" content="Trung thu vui v·∫ª nh√© - L·ªùi ch√∫c h·∫°nh ph√∫c v·ªõi m·∫∑t trƒÉng v√† th·ªè">
    
    <!-- Additional Meta Tags cho Messenger -->
    <meta property="article:author" content="Trung Thu">
    <meta property="article:section" content="L·ªùi ch√∫c">
    <meta property="article:tag" content="trung thu, l·ªùi ch√∫c, t√¨nh y√™u">
    
    <!-- Additional Meta Tags -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#ff69b4">
    <meta name="robots" content="index, follow">
    
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">
</head>

<body>

    <div id="wrapper">
        <!-- Loading Screen -->
        <div class="loading-screen" id="loadingScreen">
            <div class="loading-container">
                <div class="loading-spinner"></div>
                <div class="loading-text">ƒêang t·∫£i d·ªØ li·ªáu...</div>
                <div class="loading-subtitle">Vui l√≤ng ch·ªù trong gi√¢y l√°t</div>
            </div>
        </div>

        <!-- Error Screen -->
        <div class="error-screen" id="errorScreen" style="display: none;">
            <div class="error-container">
                <div class="error-icon">‚ö†Ô∏è</div>
                <div class="error-title">Kh√¥ng t√¨m th·∫•y ID</div>
                <div class="error-message">Vui l√≤ng ki·ªÉm tra l·∫°i ƒë∆∞·ªùng link ho·∫∑c li√™n h·ªá ng∆∞·ªùi g·ª≠i</div>
                <button class="error-button" onclick="location.reload()">Th·ª≠ l·∫°i</button>
            </div>
        </div>

        <!-- Background stars -->
        <div class="stars" id="stars"></div>

        <!-- Audio element -->
        <audio id="backgroundMusic" loop preload="auto" crossorigin="anonymous">
            <source src="music/anhnangcuaanh.mp3" type="audio/mpeg">
            <source src="music/denbenanh.mp3" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio>

        <!-- Gift container -->
        <div class="gift-container" id="giftContainer">
            <img src="gift/rabbits.gif" alt="Gift" class="gift">
        </div>

        <!-- Gift xu·∫•t hi·ªán ·ªü g√≥c tr√°i -->
        <div class="gift-appear" id="giftAppear">
            <img src="image/gift.png" alt="Gift" class="gift-image" id="giftImage">
        </div>

        <!-- Dialog popup -->
        <div class="dialog-overlay" id="dialogOverlay">
            <div class="dialog">
                <p>Ch√∫c b·∫°n m·ªôt m√πa Trung Thu tr√†n ƒë·∫ßy ni·ªÅm vui, h·∫°nh ph√∫c v√† may m·∫Øn! üåï‚ú®<br>
                    Mong r·∫±ng nh·ªØng ƒëi·ªÅu t·ªët ƒë·∫πp nh·∫•t s·∫Ω ƒë·∫øn v·ªõi b·∫°n trong nƒÉm nay!
                    <br>
                    ƒê√¢y l√† m√≥n qu√† c·ªßa ng∆∞·ªùi ·∫•y d√†nh cho b·∫°n 
                    üê∞üåô
                </p>

                <div class="dialog-image-container">
                    <img src="image/dialog.png" alt="Dialog Background" class="dialog-background">
                    <img src="gift/gift.gif" alt="Gift" class="qr-overlay" id="giftImage" style="cursor: pointer;" onerror="this.style.display='none'; console.error('Kh√¥ng th·ªÉ load ·∫£nh Gift:', this.src);">
                </div>

                <button onclick="closeDialog()">ƒê√≥ng</button>
            </div>
        </div>
        <!-- Moon with rabbit - Top right -->
        <div class="moon-section">
            <img src="image/moon.png" alt="TrƒÉng R·∫±m" class="moon">
            <!-- Music control button -->
            <div class="music-control" id="musicControl">
                <button id="playPauseBtn" class="play-pause-btn">
                    <span id="playIcon">üéµ</span>
                </button>
            </div>
            
        </div>

        <!-- Flying rabbit with ribbons - Middle left -->
        <div class="flying-rabbit-section">
            <img src="image/rabbits.png" alt="Th·ªè bay" class="flying-rabbit">
        </div>

        <!-- Traditional woman - Bottom right -->
        <div class="woman-section">
            <img src="image/sister.png" alt="Ng∆∞·ªùi ph·ª• n·ªØ truy·ªÅn th·ªëng" class="woman">
        </div>

        <!-- Mountain/Cloud shapes - Bottom -->
        <div class="mountain-section">
            <img src="image/mountain.png" alt="Mountain" class="mountain">
        </div>

        <div class="floating-lanterns">
            <img src="image/lantern.png" alt="ƒê√®n l·ªìng bay" class="lantern">
            <img src="image/lantern2.png" alt="ƒê√®n l·ªìng bay" class="lantern">
            <img src="image/lantern.png" alt="ƒê√®n l·ªìng bay" class="lantern">
            <img src="image/lantern2.png" alt="ƒê√®n l·ªìng bay" class="lantern">
            <img src="image/lantern.png" alt="ƒê√®n l·ªìng bay" class="lantern">
            <img src="image/lantern2.png" alt="ƒê√®n l·ªìng bay" class="lantern">
        </div>

        <!-- Floating Center Images Section -->
<!-- Sau 5 h√¨nh floating-image g·ªëc -->
<img class="floating-lantern" src="image/longden2.png" alt="L·ªìng ƒë√®n 2" />
<!-- L·∫∑p l·∫°i 18 l·∫ßn n·ªØa, lu√¢n phi√™n src -->

        <!-- Password Modal -->
        <div id="passwordModal" class="modal">
            <div class="modal-content">
                <h2>NHAP PASS ƒêI NGUOI DEP!</h2>
                <p>G·ª£i √Ω pass l√† sinh nh·∫≠t c·∫≠u √°</p>
                <div class="passcode-display">----</div>
                <div class="keypad">
                    <button class="key" data-value="1">1</button>
                    <button class="key" data-value="2">2</button>
                    <button class="key" data-value="3">3</button>
                    <button class="key" data-value="4">4</button>
                    <button class="key" data-value="5">5</button>
                    <button class="key" data-value="6">6</button>
                    <button class="key" data-value="7">7</button>
                    <button class="key" data-value="8">8</button>
                    <button class="key" data-value="9">9</button>
                    <button class="key" data-value="0">0</button>
                    <button class="key" data-value="‚úî">‚úî</button>
                    <button class="key" data-value="‚úñ">‚úñ</button>
                </div>
            </div>
        </div>
    </div>

    <script src="./detect-devtools.js"></script>
    <script type='text/javascript'>
        // Bypass for developers
        const keyName = 'key';
        const keyValue = '9ac7ec230e0e4513578f309d6d3579ad';

        // Handle via config
        DisableDevtool({
            tkName: keyName,
            md5: keyValue,
            interval: '100',
        });
    </script>

    <script>
        // Global variables ƒë·ªÉ l∆∞u d·ªØ li·ªáu t·ª´ API
        let apiData = null;
        let currentId = null;

        // D·ªØ li·ªáu m·∫∑c ƒë·ªãnh (thay th·∫ø cho API)
        const defaultData = {
            images: [], // Kh√¥ng c√≥ ·∫£nh m·∫∑c ƒë·ªãnh, ho·∫∑c th√™m n·∫øu c·∫ßn
            song: "bongtrang.mp3",
            senderName: ""
        };

        // Password handling
        const correctPasscode = "1212"; // Change the passcode here (4 numbers)
        let enteredPasscode = "";

        function initPasswordModal() {
            const modal = document.getElementById('passwordModal');
            const keys = document.querySelectorAll('.key');
            const display = document.querySelector('.passcode-display');

            keys.forEach(key => {
                key.addEventListener('click', () => {
                    const value = key.getAttribute('data-value');
                    if (value === '‚úî') {
                        if (enteredPasscode === correctPasscode) {
                            modal.classList.remove('show');
                            modal.style.display = 'none';
                            // Resume music or start animations if needed
                            setupMusicControls();
                        } else {
                            enteredPasscode = "";
                            display.textContent = "----";
                            // Shake animation or error effect
                            display.style.animation = 'shake 0.5s ease-in-out';
                            setTimeout(() => { display.style.animation = ''; }, 500);
                        }
                    } else if (value === '‚úñ') {
                        enteredPasscode = "";
                        display.textContent = "----";
                    } else if (value >= '0' && value <= '9' && enteredPasscode.length < 4) {
                        enteredPasscode += value;
                        display.textContent = enteredPasscode.replace(/./g, '*') + '-'.repeat(4 - enteredPasscode.length);
                    }
                });
            });
        }

        // Function ƒë·ªÉ test audio URL
        async function testAudioUrl(url) {
            return new Promise((resolve) => {
                const testAudio = new Audio();
                testAudio.crossOrigin = 'anonymous';
                
                testAudio.addEventListener('canplaythrough', () => {
                    console.log('Audio URL h·ª£p l·ªá:', url);
                    resolve(true);
                });
                
                testAudio.addEventListener('error', () => {
                    console.log('Audio URL kh√¥ng h·ª£p l·ªá:', url);
                    resolve(false);
                });
                
                testAudio.src = url;
                testAudio.load();
            });
        }

        // Function ƒë·ªÉ c·∫≠p nh·∫≠t audio source t·ª´ API
        async function updateAudioSource() {
            if (apiData && apiData.song) {
                const audio = document.getElementById('backgroundMusic');
                let audioUrl = apiData.song;
                
                // Ki·ªÉm tra n·∫øu l√† URL ƒë·∫ßy ƒë·ªß hay ch·ªâ l√† t√™n file
                if (apiData.song.startsWith('http://') || apiData.song.startsWith('https://')) {
                    // Test URL tr∆∞·ªõc khi s·ª≠ d·ª•ng
                    const isValid = await testAudioUrl(apiData.song);
                    if (isValid) {
                        audio.src = apiData.song;
                        console.log('ƒê√£ c·∫≠p nh·∫≠t audio source t·ª´ URL:', apiData.song);
                    } else {
                        console.log('URL audio kh√¥ng h·ª£p l·ªá, s·ª≠ d·ª•ng audio m·∫∑c ƒë·ªãnh');
                        audio.src = 'music/bongtrang.mp3';
                    }
                } else {
                    // N·∫øu ch·ªâ l√† t√™n file, th√™m ƒë∆∞·ªùng d·∫´n music/
                    audio.src = `music/${apiData.song}`;
                    console.log('ƒê√£ c·∫≠p nh·∫≠t audio source t·ª´ file:', apiData.song);
                }
                
                // Load l·∫°i audio ƒë·ªÉ √°p d·ª•ng source m·ªõi
                audio.load();
            } else {
                // S·ª≠ d·ª•ng m·∫∑c ƒë·ªãnh n·∫øu kh√¥ng c√≥ apiData.song
                const audio = document.getElementById('backgroundMusic');
                audio.src = 'music/bongtrang.mp3';
                audio.load();
                console.log('S·ª≠ d·ª•ng audio m·∫∑c ƒë·ªãnh');
            }
        }


        // Function ƒë·ªÉ c·∫≠p nh·∫≠t URL ngay l·∫≠p t·ª©c
        function updateURLImmediately() {
            const currentUrl = window.location.href;
            const ogUrl = document.querySelector('meta[property="og:url"]');
            if (ogUrl) {
                ogUrl.setAttribute('content', currentUrl);
                console.log('ƒê√£ c·∫≠p nh·∫≠t og:url th√†nh:', currentUrl);
            }
        }

        // Function ƒë·ªÉ c·∫≠p nh·∫≠t meta tags cho chia s·∫ª m·∫°ng x√£ h·ªôi
        function updateSocialMetaTags() {
            // C·∫≠p nh·∫≠t URL ngay l·∫≠p t·ª©c (kh√¥ng c·∫ßn ƒë·ª£i API)
            updateURLImmediately();
            
            if (apiData) {
                // C·∫≠p nh·∫≠t title v√† description d·ª±a tr√™n d·ªØ li·ªáu API
                let customTitle = "Trung thu vui v·∫ª nh√©";
                let customDescription = "B·∫°n th·∫≠t may m·∫Øn khi nh·∫≠n ƒë∆∞·ª£c m√≥n qu√† n√†y. Ch√∫c b·∫°n v√† gia ƒë√¨nh lu√¥n lu√¥n h·∫°nh ph√∫c üåï‚ú®";
                
                // N·∫øu c√≥ t√™n ng∆∞·ªùi g·ª≠i, th√™m v√†o title
                if (apiData.senderName) {
                    customTitle = `Trung thu vui v·∫ª nh√© - T·ª´ ${apiData.senderName}`;
                    customDescription = `${apiData.senderName} g·ª≠i l·ªùi ch√∫c: B·∫°n th·∫≠t may m·∫Øn khi nh·∫≠n ƒë∆∞·ª£c m√≥n qu√† n√†y. Ch√∫c b·∫°n v√† gia ƒë√¨nh lu√¥n lu√¥n h·∫°nh ph√∫c üåï‚ú®`;
                }
                
                // C·∫≠p nh·∫≠t title c·ªßa trang
                document.title = customTitle;
                
                // C·∫≠p nh·∫≠t meta description
                const metaDescription = document.querySelector('meta[name="description"]');
                if (metaDescription) {
                    metaDescription.setAttribute('content', customDescription);
                }
                
                // C·∫≠p nh·∫≠t Open Graph tags
                const ogTitle = document.querySelector('meta[property="og:title"]');
                if (ogTitle) {
                    ogTitle.setAttribute('content', customTitle);
                }
                
                const ogDescription = document.querySelector('meta[property="og:description"]');
                if (ogDescription) {
                    ogDescription.setAttribute('content', customDescription);
                }
                
                // C·∫≠p nh·∫≠t Twitter tags
                const twitterTitle = document.querySelector('meta[name="twitter:title"]');
                if (twitterTitle) {
                    twitterTitle.setAttribute('content', customTitle);
                }
                
                const twitterDescription = document.querySelector('meta[name="twitter:description"]');
                if (twitterDescription) {
                    twitterDescription.setAttribute('content', customDescription);
                }
                
                // S·ª≠ d·ª•ng ·∫£nh tƒ©nh og-image.png v·ªõi URL ƒë·∫ßy ƒë·ªß
                const ogImagePath = 'https://trung-thu-two.vercel.app/image/og-image.png';
                const ogImageMeta = document.querySelector('meta[property="og:image"]');
                if (ogImageMeta) {
                    ogImageMeta.setAttribute('content', ogImagePath);
                }
                
                const twitterImageMeta = document.querySelector('meta[name="twitter:image"]');
                if (twitterImageMeta) {
                    twitterImageMeta.setAttribute('content', ogImagePath);
                }
                
                console.log('ƒê√£ c·∫≠p nh·∫≠t meta tags cho chia s·∫ª m·∫°ng x√£ h·ªôi v·ªõi ·∫£nh og-image.png');
            }
        }

        // Function ƒë·ªÉ hi·ªÉn th·ªã gift v√† th·ªè
        function showGiftAndRabbit() {
            console.log('Hi·ªÉn th·ªã gift v√† th·ªè');
            
            // Hi·ªÉn th·ªã l·∫°i c√°c element
            const giftContainer = document.getElementById('giftContainer');
            const giftAppear = document.getElementById('giftAppear');
            
            if (giftContainer) {
                giftContainer.style.display = 'block';
            }
            if (giftAppear) {
                giftAppear.style.display = 'block';
            }
            
            // B·∫Øt ƒë·∫ßu animation
            startGiftAnimation();
        }

        // Function ƒë·ªÉ ·∫©n gift v√† th·ªè
        function hideGiftAndRabbit() {
            console.log('·∫®n gift v√† th·ªè v√¨ kh√¥ng c√≥ linkQR');
            
            // ·∫®n gift container (th·ªè ch·∫°y)
            const giftContainer = document.getElementById('giftContainer');
            if (giftContainer) {
                giftContainer.style.display = 'none';
            }
            
            // ·∫®n gift appear (gift ·ªü g√≥c tr√°i)
            const giftAppear = document.getElementById('giftAppear');
            if (giftAppear) {
                giftAppear.style.display = 'none';
            }
        }

        // Function ƒë·ªÉ hi·ªÉn th·ªã loading screen
        function showLoading() {
            const loadingScreen = document.getElementById('loadingScreen');
            const errorScreen = document.getElementById('errorScreen');
            loadingScreen.style.display = 'flex';
            errorScreen.style.display = 'none';
        }

        // Function ƒë·ªÉ ·∫©n loading screen
        function hideLoading() {
            const loadingScreen = document.getElementById('loadingScreen');
            loadingScreen.style.opacity = '0';
            setTimeout(() => {
                loadingScreen.style.display = 'none';
            }, 500);
        }

        // Function ƒë·ªÉ hi·ªÉn th·ªã error screen
        function showError() {
            const loadingScreen = document.getElementById('loadingScreen');
            const errorScreen = document.getElementById('errorScreen');
            loadingScreen.style.display = 'none';
            errorScreen.style.display = 'flex';
        }

        // Function ƒë·ªÉ kh·ªüi t·∫°o d·ªØ li·ªáu (b·ªè ki·ªÉm tra ID, lu√¥n s·ª≠ d·ª•ng default)
        async function initializeData() {
            showLoading();
            
            // B·ªè l·∫•y ID v√† fetch API, lu√¥n s·ª≠ d·ª•ng default data
            apiData = defaultData;
            console.log('S·ª≠ d·ª•ng d·ªØ li·ªáu m·∫∑c ƒë·ªãnh');
            
            // C·∫≠p nh·∫≠t c√°c th√†nh ph·∫ßn t·ª´ d·ªØ li·ªáu m·∫∑c ƒë·ªãnh
            await updateAudioSource();
            updateSocialMetaTags(); // C·∫≠p nh·∫≠t meta tags cho chia s·∫ª
            hideGiftAndRabbit();
            console.log('ƒê√£ t·∫£i th√†nh c√¥ng d·ªØ li·ªáu m·∫∑c ƒë·ªãnh');
            hideLoading();
            
            // Show password modal after loading
            setTimeout(() => {
                const modal = document.getElementById('passwordModal');
                modal.style.display = 'flex';
                modal.classList.add('show');
                initPasswordModal();
            }, 1000);
            
            return true;
        }

        // Function ƒë·ªÉ hi·ªÉn th·ªã th√¥ng b√°o l·ªói
        function showErrorMessage(message) {
            // T·∫°o th√¥ng b√°o t·∫°m th·ªùi
            const errorDiv = document.createElement('div');
            errorDiv.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: rgba(255, 0, 0, 0.8);
                color: white;
                padding: 10px 15px;
                border-radius: 5px;
                z-index: 10000;
                font-size: 14px;
                max-width: 300px;
            `;
            errorDiv.textContent = message;
            document.body.appendChild(errorDiv);
            
            // T·ª± ƒë·ªông ·∫©n sau 5 gi√¢y
            setTimeout(() => {
                if (errorDiv.parentNode) {
                    errorDiv.parentNode.removeChild(errorDiv);
                }
            }, 5000);
        }

        // Create floating stars
        function createStars() {
            const starsContainer = document.getElementById('stars');
            const numStars = 80;

            for (let i = 0; i < numStars; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.width = Math.random() * 2 + 1 + 'px';
                star.style.height = star.style.width;
                star.style.animationDelay = Math.random() * 3 + 's';
                starsContainer.appendChild(star);
            }
        }

        // Initialize stars when page loads
        window.addEventListener('load', createStars);

        // Dialog functions
        function showDialog() {
            const dialogOverlay = document.getElementById('dialogOverlay');
            dialogOverlay.classList.add('show');
        }

        function closeDialog() {
            const dialogOverlay = document.getElementById('dialogOverlay');
            dialogOverlay.classList.remove('show');
        }

        // Add click event to gift image
        document.addEventListener('DOMContentLoaded', function () {
            // C·∫≠p nh·∫≠t URL ngay khi DOM ready ƒë·ªÉ Messenger c√≥ th·ªÉ ƒë·ªçc
            updateURLImmediately();
            
            // Click v√†o gift trong dialog ƒë·ªÉ m·ªü link qu√† t·∫∑ng (nh∆∞ng kh√¥ng c√≥ link, ch·ªâ alert)
            const dialogGiftImage = document.querySelector('.qr-overlay');
            if (dialogGiftImage) {
                dialogGiftImage.addEventListener('click', function() {
                    console.log('Ch∆∞a c√≥ link qu√† t·∫∑ng t·ª´ backend');
                    // C√≥ th·ªÉ hi·ªÉn th·ªã th√¥ng b√°o cho user
                    alert('Ch∆∞a c√≥ link qu√† t·∫∑ng t·ª´ ng∆∞·ªùi g·ª≠i');
                });
            }
        });

        // Music control functions
        function setupMusicControls() {
            const audio = document.getElementById('backgroundMusic');
            const playPauseBtn = document.getElementById('playPauseBtn');
            const playIcon = document.getElementById('playIcon');
            let isPlaying = false;

            // Set volume to 50% for better user experience
            audio.volume = 0.5;

            // Play/Pause button click handler
            playPauseBtn.addEventListener('click', function() {
                if (isPlaying) {
                    audio.pause();
                    playIcon.textContent = 'üéµ';
                    playIcon.style.opacity = '0.7';
                } else {
                    audio.play().then(() => {
                        playIcon.textContent = '‚è∏Ô∏è';
                        playIcon.style.opacity = '1';
                    }).catch(error => {
                        console.log('Audio play failed:', error);
                        // Fallback: show play button even if audio fails
                        playIcon.textContent = 'üéµ';
                    });
                }
                isPlaying = !isPlaying;
            });

            // Auto-play on mobile after user interaction
            function enableAutoPlay() {
                // Try to play audio after user interaction
                audio.play().then(() => {
                    isPlaying = true;
                    playIcon.textContent = '‚è∏Ô∏è';
                    playIcon.style.opacity = '1';
                }).catch(error => {
                    console.log('Auto-play failed:', error);
                });
            }

            // Enable auto-play after first user interaction
            let hasInteracted = false;
            document.addEventListener('click', function() {
                if (!hasInteracted) {
                    hasInteracted = true;
                    enableAutoPlay();
                }
            }, { once: true });

            // Handle audio events
            audio.addEventListener('ended', function() {
                isPlaying = false;
                playIcon.textContent = 'üéµ';
                playIcon.style.opacity = '0.7';
            });

            audio.addEventListener('error', function() {
                console.log('Audio error occurred');
                playIcon.textContent = 'üîá';
                playIcon.style.opacity = '0.5';
            });
        }


        // Gift animation - ch·ªâ ch·∫°y khi c√≥ linkQR h·ª£p l·ªá
        function startGiftAnimation() {
            console.log('Kh√¥ng c√≥ linkQR, b·ªè qua animation gift');
            return;
        }

        // Kh·ªüi t·∫°o d·ªØ li·ªáu khi trang load
        window.addEventListener('load', async function() {
            // C·∫≠p nh·∫≠t URL ngay l·∫≠p t·ª©c ƒë·ªÉ Messenger c√≥ th·ªÉ ƒë·ªçc ƒë√∫ng
            updateSocialMetaTags();
            
            const success = await initializeData();
        });

        // handle resize
        window.addEventListener('resize', () => {
            // C√≥ th·ªÉ th√™m logic resize n·∫øu c·∫ßn
        });
    </script>
</body>

</html>
